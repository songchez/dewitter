(this.webpackJsonpdewitter=this.webpackJsonpdewitter||[]).push([[0],{69:function(e,t,c){},70:function(e,t,c){"use strict";c.r(t);var n=c(10),a=c.n(n),r=c(49),s=c.n(r),i=c(11),o=c(38),u=c(15),j=c(0),l=c.n(j),b=c(1),d=c(50),O=c(21),f=c(29),h=c(51),p=Object(d.a)({apiKey:"AIzaSyDKug_-NSxZDeqtqDM4Z50Tt4ubJ0AzUB0",authDomain:"dewitter-b7408.firebaseapp.com",projectId:"dewitter-b7408",storageBucket:"dewitter-b7408.appspot.com",messagingSenderId:"275356463785",appId:"1:275356463785:web:01076df98cc56c6d12efb8",measurementId:"G-892TSZH5QQ"}),x=Object(h.a)(p),m=Object(f.c)(p),v=Object(O.d)(p),g=c(36),y=c(26),w=c(6);var N=function(){var e,t=Object(n.useState)(""),c=Object(i.a)(t,2),a=c[0],r=c[1],s=Object(n.useState)(""),o=Object(i.a)(s,2),u=o[0],j=o[1],d=Object(n.useState)(!1),f=Object(i.a)(d,2),h=f[0],p=f[1],x=Object(n.useState)(""),m=Object(i.a)(x,2),N=m[0],k=m[1],U=function(e){var t=e.target,c=t.name,n=t.value;"email"===c?r(n):"password"===c&&j(n)},S=function(){var t=Object(b.a)(l.a.mark((function t(c){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c.preventDefault(),t.prev=1,!h){t.next=8;break}return t.next=5,Object(O.c)(v,a,u);case 5:e=t.sent,t.next=11;break;case 8:return t.next=10,Object(O.f)(v,a,u);case 10:e=t.sent;case 11:console.log(e),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),k(t.t0.message);case 17:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e){return t.apply(this,arguments)}}(),C=function(){var e=Object(b.a)(l.a.mark((function e(t){var c,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(c=t.target.name)?n=new O.b(v):"github"===c&&(n=new O.a(v)),e.next=4,Object(O.g)(v,n).then((function(e){})).catch((function(e){console.error(e.message)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:"authContainer",children:[Object(w.jsx)(y.a,{icon:g.c,color:"#04AAFF",size:"3x",style:{marginBottom:30}}),Object(w.jsxs)("form",{onSubmit:S,className:"container",children:[Object(w.jsx)("input",{name:"email",type:"email",placeholder:"E_mail",required:!0,value:a,onChange:U,className:"authInput"}),Object(w.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:u,className:"authInput",onChange:U}),Object(w.jsx)("input",{type:"submit",className:"authInput authSubmit",value:h?"CreatAccount":"Sign In"}),N&&Object(w.jsx)("span",{className:"authError",children:N})]}),Object(w.jsx)("span",{onClick:function(){return p((function(e){return!e}))},className:"authSwitch",children:h?"Sign In":"CreatAccount"}),Object(w.jsxs)("div",{className:"authBtns",children:[Object(w.jsxs)("button",{onClick:C,name:"github",className:"authBtn",children:["Continue with Github ",Object(w.jsx)(y.a,{icon:g.a})]}),Object(w.jsxs)("button",{onClick:C,name:"google",className:"authBtn",children:["Continue with Google ",Object(w.jsx)(y.a,{icon:g.b})]})]})]})},k=c(52),U=c(30),S=c(25),C=c(23),I=function(e){var t=e.deweetObj,c=e.isOwned,a=e.attachmentUrl,r=Object(n.useState)(!1),s=Object(i.a)(r,2),o=s[0],u=s[1],j=Object(n.useState)(t.text),d=Object(i.a)(j,2),O=d[0],f=d[1],h=function(){var e=Object(b.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete?")){e.next=6;break}return e.next=4,Object(S.c)(Object(S.d)(m,"msg/".concat(t.id)));case 4:return e.next=6,Object(C.a)(Object(C.d)(x,t.attachmentUrl));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){return u((function(e){return!e}))},v=function(){var e=Object(b.a)(l.a.mark((function e(c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.next=3,Object(S.j)(Object(S.d)(m,"msg/".concat(t.id)),{text:O});case 3:u(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"deweet",children:o?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("form",{onSubmit:v,className:"container deweetEdit",children:Object(w.jsx)("input",{type:"text",placeholder:"Edit your deweet",value:O,required:!0,autoFocus:!0,className:"formInput",onChange:function(e){var t=e.target.value;f(t)}})}),Object(w.jsx)("button",{onClick:v,children:"Edit!"}),Object(w.jsx)("button",{onClick:p,className:"formBtn cancelBtn",children:"Cancel"})]}):Object(w.jsxs)(w.Fragment,{children:[a&&Object(w.jsx)("img",{src:a,alt:"attach"}),Object(w.jsx)("h3",{children:t.text}),Object(w.jsx)("p",{children:new Date(t.createdAt).toString()}),c&&Object(w.jsxs)("div",{class:"deweet__actions",children:[Object(w.jsx)("span",{class:"btn",onClick:h,children:Object(w.jsx)(y.a,{icon:U.d})}),Object(w.jsx)("span",{class:"btn",onClick:p,children:Object(w.jsx)(y.a,{icon:U.a})})]})]})})},A=c(71),F=function(e){var t=e.user,c=e.refreshUser,a=Object(n.useState)(""),r=Object(i.a)(a,2),s=r[0],o=r[1],u=Object(n.useState)(""),j=Object(i.a)(u,2),d=j[0],h=j[1],p=Object(n.useRef)(),g=function(){h(""),p.current.value=""},N=function(){var e=Object(b.a)(l.a.mark((function e(c){var n,a,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==s){e.next=2;break}return e.abrupt("return");case 2:if(c.preventDefault(),n="",""===d){e.next=12;break}return a=Object(C.d)(x,"".concat(t.uid,"/").concat(Object(A.a)())),e.next=8,Object(C.e)(a,d,"data_url");case 8:return r=e.sent,e.next=11,Object(C.b)(r.ref);case 11:n=e.sent;case 12:return i={text:s,createdAt:Date.now(),createdId:t.uid,attachmentUrl:n},e.next=15,Object(f.a)(Object(f.b)(m,"msg"),i).catch((function(e){console.error(e)}));case 15:o(""),g();case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("button",{onClick:function(){Object(O.h)(v).then((function(){console.log("\ub85c\uadf8\uc544\uc6c3"),c()})).catch((function(e){console.error(e)}))},children:"\ub85c\uadf8\uc544\uc6c3\ud83c\udf86"}),Object(w.jsxs)("form",{onSubmit:N,className:"factoryForm",children:[Object(w.jsx)("div",{className:"factoryInput__container"}),Object(w.jsx)("input",{className:"factoryInput__input",value:s,onChange:function(e){var t=e.target.value;o(t)},type:"text",placeholder:"What's on your mind ?",maxLength:120}),Object(w.jsx)("input",{type:"submit",className:"factoryInput__arrow"}),Object(w.jsxs)("label",{for:"attach-file",className:"factoryInput__label",children:[Object(w.jsx)("span",{children:"Add photos"}),Object(w.jsx)(y.a,{icon:U.b})]}),Object(w.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],c=new FileReader;c.onloadend=function(e){var t=e.currentTarget.result;h(t)},c.readAsDataURL(t)},ref:p,style:{opacity:0}}),Object(w.jsx)("input",{type:"submit",value:"Deweet",onClick:N}),d&&Object(w.jsxs)("div",{className:"factoryForm__attachment",children:[Object(w.jsx)("img",{src:d,style:{backgroundImage:d},alt:"yourDeweet"}),Object(w.jsxs)("div",{className:"factoryForm__clear",onClick:g,children:[Object(w.jsx)("span",{children:"Remove"}),Object(w.jsx)(y.a,{icon:U.c})]})]})]})]})};var _=function(e){var t=e.user,c=e.refreshUser,a=Object(n.useState)([]),r=Object(i.a)(a,2),s=r[0],o=r[1];return Object(n.useEffect)((function(){var e=Object(f.f)(Object(f.b)(Object(f.c)(),"msg"),Object(f.e)("createdAt")),t=Object(f.d)(e,(function(e){var t=e.docs.map((function(e){return Object(k.a)({id:e.id},e.data())}));o(t)}));return function(){t()}}),[]),Object(w.jsxs)("div",{className:"container",children:[Object(w.jsx)(F,{user:t,refreshUser:c}),Object(w.jsx)("div",{style:{marginTop:30},children:s.map((function(e){return Object(w.jsx)(I,{deweetObj:e,isOwned:e.createdId===t.uid,attachmentUrl:e.attachmentUrl},e.id)}))})]})},R=c(40),D=function(e){var t=e.refreshUser,c=e.user,a=Object(n.useState)(c.displayName),r=Object(i.a)(a,2),s=r[0],o=r[1],u=Object(n.useState)(c.photoURL),j=Object(i.a)(u,2),d=j[0],O=j[1];Object(n.useEffect)((function(){f()}));var f=function(){var e=Object(b.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(S.i)(Object(S.b)(m,"msg"),Object(S.k)("createdId","==",c.uid),Object(S.h)("createdAt")),e.next=3,Object(S.e)(t);case 3:e.sent.forEach((function(e){}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(b.a)(l.a.mark((function e(){var n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure Edit Your Profile?")){e.next=22;break}if(n="",d!==c.photoURL){e.next=8;break}console.log("\uc774\ubbf8\uc9c0 \uc548\ubc14\ub01c"),n=c.photoURL,e.next=16;break;case 8:if(""===d){e.next=16;break}return a=Object(C.d)(x,"".concat(c.uid,"/").concat(Object(A.a)())),e.next=12,Object(C.e)(a,d,"data_url");case 12:return r=e.sent,e.next=15,Object(C.b)(r.ref);case 15:n=e.sent;case 16:if(!(s.length>3)){e.next=21;break}return e.next=19,Object(R.i)(v.currentUser,{displayName:s,photoURL:n}).then((function(){t(),alert("\ud504\ub85c\ud544\uc774 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")})).catch((function(e){console.log(e)}));case 19:e.next=22;break;case 21:alert("\uae00\uc790\uc218\uac00 \ub108\ubb34 \uc801\uc2b5\ub2c8\ub2e4!(4\uae00\uc790 \uc774\uc0c1)");case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=Object(n.useRef)();return Object(w.jsxs)("div",{className:"container",children:[Object(w.jsxs)("h3",{children:[c.displayName,"\uc758 \ud504\ub85c\ud544"]}),Object(w.jsx)("h1",{children:"Edit your Profile"}),Object(w.jsxs)("form",{onSubmit:h,className:"profileForm",children:[Object(w.jsxs)("div",{children:[" ",Object(w.jsx)("input",{onChange:function(e){var t=e.target.value;o(t)},type:"text",autoFocus:!0,placeholder:"Edit Your Name",value:s,className:"formInput"})]}),d&&Object(w.jsxs)("div",{children:[Object(w.jsx)("img",{src:d,width:"100px",height:"100px",alt:"".concat(c.displayName," \uc758 \ud504\ub85c\ud544\uc774\ubbf8\uc9c0")}),Object(w.jsx)("button",{onClick:function(){O(""),p.current.value=""},children:"Clear"})]}),Object(w.jsxs)("div",{children:[" ",Object(w.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],c=new FileReader;c.onloadend=function(e){var t=e.currentTarget.result;O(t)},c.readAsDataURL(t)},ref:p})]}),Object(w.jsx)("input",{type:"submit",value:"Update Profile",className:"formBtn",style:{marginTop:10}})]})]})},E=function(e){var t=e.user;return Object(w.jsx)("nav",{children:Object(w.jsxs)("ul",{style:{display:"flex",justifyContent:"center",marginTop:50},children:[Object(w.jsx)("li",{children:Object(w.jsx)(o.b,{to:"/",style:{marginRight:10},children:Object(w.jsx)(y.a,{icon:g.c,color:"#04AAFF",size:"2x"})})}),Object(w.jsx)("li",{children:Object(w.jsxs)(o.b,{to:"/profile",style:{marginLeft:10,display:"flex",flexDirection:"column",alignItems:"center",fontSize:12},children:[Object(w.jsx)(y.a,{icon:U.e,color:"#04AAFF",size:"2x"}),Object(w.jsx)("span",{style:{marginTop:10},children:t.displayName?"".concat(t.displayName,"\uc758 Profile"):"Profile"})]})})]})})};var L=function(e){var t=e.refreshUser,c=e.user;return Object(w.jsxs)(o.a,{children:[c&&Object(w.jsx)(E,{user:c}),Object(w.jsx)(u.c,{children:c?Object(w.jsxs)("div",{style:{maxWidth:890,width:"100%",margin:"0 auto",marginTop:80,display:"flex",justifyContent:"center"},children:[Object(w.jsx)(u.a,{exact:!0,path:"/",children:Object(w.jsx)(_,{refreshUser:t,user:c})}),Object(w.jsx)(u.a,{exact:!0,path:"/profile",children:Object(w.jsx)(D,{refreshUser:t,user:c})})]}):Object(w.jsx)(u.a,{exact:!0,path:"/",children:Object(w.jsx)(N,{})})})]})};var B=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(v.currentUser),s=Object(i.a)(r,2),o=s[0],u=s[1];return Object(n.useEffect)((function(){Object(O.e)(v,(function(e){e&&u({displayName:e.displayName,photoURL:e.photoURL,uid:e.uid,updateProfile:function(e){return Object(O.i)(v,e)}}),a(!0)}))}),[]),Object(w.jsx)(w.Fragment,{children:c?Object(w.jsx)(L,{refreshUser:function(){if(v.currentUser){var e=v.currentUser;u({displayName:e.displayName,photoURL:e.photoURL,uid:e.uid,updateProfile:function(e){return Object(O.i)(v,e)}})}else u(null)},user:o}):"\ub85c\ub529\uc911"})};c(69);s.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(B,{})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.ffd5a0b8.chunk.js.map