(this.webpackJsonpdewitter=this.webpackJsonpdewitter||[]).push([[0],{71:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a=n(7),r=n.n(a),c=n(49),i=n.n(c),s=n(11),o=n(38),l=n(15),u=n(0),j=n.n(u),b=n(1),d=n(50),m=n(28),f=n(29),p=n(51),h=Object(d.a)({apiKey:"AIzaSyDKug_-NSxZDeqtqDM4Z50Tt4ubJ0AzUB0",authDomain:"dewitter-b7408.firebaseapp.com",projectId:"dewitter-b7408",storageBucket:"dewitter-b7408.appspot.com",messagingSenderId:"275356463785",appId:"1:275356463785:web:01076df98cc56c6d12efb8",measurementId:"G-892TSZH5QQ"}),O=Object(p.a)(h),x=Object(f.c)(h),y=Object(m.d)(h),g=n(42),v=n(25),w=n(6);var N=function(){var e,t=Object(a.useState)(""),n=Object(s.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(""),o=Object(s.a)(i,2),l=o[0],u=o[1],d=Object(a.useState)(!1),f=Object(s.a)(d,2),p=f[0],h=f[1],O=Object(a.useState)(""),x=Object(s.a)(O,2),N=x[0],S=x[1],k=function(e){var t=e.target,n=t.name,a=t.value;"email"===n?c(a):"password"===n&&u(a)},U=function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),t.prev=1,!p){t.next=8;break}return t.next=5,Object(m.c)(y,r,l);case 5:e=t.sent,t.next=11;break;case 8:return t.next=10,Object(m.f)(y,r,l);case 10:e=t.sent;case 11:console.log(e),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),S(t.t0.message);case 17:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e){return t.apply(this,arguments)}}(),C=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(n=t.target.name)?a=new m.b(y):"github"===n&&(a=new m.a(y)),e.next=4,Object(m.g)(y,a).then((function(e){})).catch((function(e){console.error(e.message)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:"authContainer",children:[Object(w.jsx)(v.a,{icon:g.c,color:"#04AAFF",size:"3x",style:{marginBottom:30}}),Object(w.jsxs)("form",{onSubmit:U,className:"container",children:[Object(w.jsx)("input",{name:"email",type:"email",placeholder:"E_mail",required:!0,value:r,onChange:k,className:"authInput"}),Object(w.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:l,className:"authInput",onChange:k}),Object(w.jsx)("input",{type:"submit",className:"authInput authSubmit",value:p?"CreatAccount":"Sign In"}),N&&Object(w.jsx)("span",{className:"authError",children:N})]}),Object(w.jsx)("span",{onClick:function(){return h((function(e){return!e}))},className:"authSwitch",children:p?"Sign In":"CreatAccount"}),Object(w.jsxs)("div",{className:"authBtns",children:[Object(w.jsxs)("button",{onClick:C,name:"github",className:"authBtn",children:["Continue with Github ",Object(w.jsx)(v.a,{icon:g.a})]}),Object(w.jsxs)("button",{onClick:C,name:"google",className:"authBtn",children:["Continue with Google ",Object(w.jsx)(v.a,{icon:g.b})]})]})]})},S=n(52),k=n(30),U=n(24),C=n(22),E=function(e){var t=e.deweetObj,n=e.isOwned,r=e.attachmentUrl,c=e.fileTypes,i=e.photoUrl,o=e.userName,l=e.color,u=Object(a.useState)(!1),d=Object(s.a)(u,2),m=d[0],f=d[1],p=Object(a.useState)(t.text),h=Object(s.a)(p,2),y=h[0],g=h[1],N=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete?")){e.next=6;break}return e.next=4,Object(U.c)(Object(U.d)(x,"msg/".concat(t.id)));case 4:return e.next=6,Object(C.a)(Object(C.d)(O,t.attachmentUrl));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){return f((function(e){return!e}))},E=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,Object(U.j)(Object(U.d)(x,"msg/".concat(t.id)),{text:y,createdAt:Date.now()});case 3:f(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"deweet",children:m?Object(w.jsxs)("div",{className:"deweetEdit",children:[Object(w.jsx)("form",{onSubmit:E,className:"container deweetEdit",children:Object(w.jsx)("input",{type:"text",placeholder:"Edit your deweet",value:y,required:!0,autoFocus:!0,className:"formInput",onChange:function(e){var t=e.target.value;g(t)}})}),Object(w.jsx)("button",{onClick:E,className:"formBtn",children:"Edit"}),Object(w.jsx)("button",{onClick:S,className:"formBtn cancelBtn",children:"Cancel"})]}):Object(w.jsxs)(w.Fragment,{children:[i&&Object(w.jsx)("img",{className:"deweet__photoUrl",src:i,alt:"photoUrl"}),r&&(console.log("\ud0c0\uc785: ",c),"image"===c?Object(w.jsx)("img",{className:"deweet__attach",src:r,alt:"attach"}):"audio"===c?Object(w.jsx)("div",{className:"deweet__audio",children:Object(w.jsx)("audio",{controls:!0,children:Object(w.jsx)("source",{src:r})})}):void 0),Object(w.jsx)("h3",{className:"deweet__disName",style:{color:l},children:o}),Object(w.jsx)("h4",{children:t.text}),Object(w.jsx)("p",{children:function(){var e=new Date(t.createdAt).toString();return e=e.substring(3,21)}()}),n&&Object(w.jsxs)("div",{className:"deweet__actions",children:[Object(w.jsx)("span",{className:"btn",onClick:N,children:Object(w.jsx)(v.a,{icon:k.f})}),Object(w.jsx)("span",{className:"btn",onClick:S,children:Object(w.jsx)(v.a,{icon:k.a})})]})]})})},P=n(73),D=function(e){var t,r=e.user,c=(e.refreshUser,Object(a.useState)("")),i=Object(s.a)(c,2),o=i[0],l=i[1],u=Object(a.useState)(""),d=Object(s.a)(u,2),m=d[0],p=d[1],h=Object(a.useState)(""),y=Object(s.a)(h,2),g=y[0],N=y[1],S=Object(a.useRef)(),U=function(){N(""),S.current.value=""},E=function(){var e=n(67);t=e()},D=function(){var e=Object(b.a)(j.a.mark((function e(n){var a,c,i,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==o){e.next=2;break}return e.abrupt("return");case 2:if(n.preventDefault(),a="",""===g){e.next=12;break}return c=Object(C.d)(O,"".concat(r.uid,"/").concat(Object(P.a)())),e.next=8,Object(C.e)(c,g,"data_url");case 8:return i=e.sent,e.next=11,Object(C.b)(i.ref);case 11:a=e.sent;case 12:return E(),s={text:o,createdAt:Date.now(),createdId:r.uid,attachmentUrl:a,fileTypes:m,createdWho:r.displayName,profileImg:r.photoURL,userColor:t},e.next=16,Object(f.a)(Object(f.b)(x,"msg"),s).catch((function(e){console.error(e)}));case 16:l(""),U();case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("form",{onSubmit:D,className:"factoryForm",children:[Object(w.jsx)("p",{children:"".concat(r.displayName,"\ub2d8 \ud658\uc601\ud569\ub2c8\ub2e4!")}),Object(w.jsxs)("div",{className:"factoryInput__container",children:[Object(w.jsx)("input",{className:"factoryInput__input",value:o,onChange:function(e){var t=e.target.value;l(t)},type:"text",placeholder:"What's on your mind ?",maxLength:120}),Object(w.jsx)("label",{htmlFor:"submitBtn",className:"factoryInput__arrow",children:Object(w.jsx)(v.a,{icon:k.c,size:"2x"})}),Object(w.jsx)("input",{id:"submitBtn",type:"submit",value:""})]}),Object(w.jsxs)("label",{htmlFor:"attach-file",className:"factoryInput__label",children:[Object(w.jsx)("span",{children:"\ud30c\uc77c\ucca8\ubd80"}),Object(w.jsx)(v.a,{icon:k.d})]}),Object(w.jsx)("input",{id:"attach-file",type:"file",accept:"image/*, audio/*",onChange:function(e){var t=e.target.files,n=t[0];if(t[0].size>8388608)alert("\ucca8\ubd80\ud30c\uc77c \uc0ac\uc774\uc988\ub294 8MB \uc774\ub0b4\ub85c \ub4f1\ub85d \uac00\ub2a5\ud569\ub2c8\ub2e4.");else{var a=new FileReader;a.onloadend=function(e){var t=e.currentTarget.result;N(t),"image"===t.substring(5,10)?p("image"):"audio"===t.substring(5,10)&&p("audio")},a.readAsDataURL(n)}},ref:S,style:{opacity:0}}),g&&Object(w.jsxs)("div",{className:"factoryForm__attachment",children:[Object(w.jsx)("div",{children:Object(w.jsx)("img",{src:g,alt:S.current.value.substring(12)})}),Object(w.jsxs)("div",{className:"factoryForm__clear",onClick:U,children:[Object(w.jsx)("span",{children:"Remove"}),Object(w.jsx)(v.a,{icon:k.e})]})]})]})})};var _=function(e){var t=e.user,n=e.refreshUser,r=Object(a.useState)([]),c=Object(s.a)(r,2),i=c[0],o=c[1];return Object(a.useEffect)((function(){var e=Object(f.f)(Object(f.b)(Object(f.c)(),"msg"),Object(f.e)("createdAt","desc")),t=Object(f.d)(e,(function(e){var t=e.docs.map((function(e){return Object(S.a)({id:e.id},e.data())}));o(t)}));return function(){t()}}),[]),Object(w.jsxs)("div",{className:"container",children:[Object(w.jsx)(D,{user:t,refreshUser:n}),Object(w.jsx)("div",{style:{marginTop:30},children:i.map((function(e){return Object(w.jsx)(E,{color:e.userColor,deweetObj:e,fileTypes:e.fileTypes,isOwned:e.createdId===t.uid,userName:e.createdWho,photoUrl:e.profileImg,attachmentUrl:e.attachmentUrl},e.id)}))})]})},I=n(36),T=function(e){var t=e.refreshUser,n=e.user,r=Object(a.useState)(n.displayName),c=Object(s.a)(r,2),i=c[0],o=c[1],l=Object(a.useState)(n.photoURL),u=Object(s.a)(l,2),d=u[0],m=u[1];Object(a.useEffect)((function(){f()}));var f=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(U.i)(Object(U.b)(x,"msg"),Object(U.k)("createdId","==",n.uid),Object(U.h)("createdAt")),e.next=3,Object(U.e)(t);case 3:e.sent.forEach((function(e){}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(b.a)(j.a.mark((function e(){var a,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure Edit Your Profile?")){e.next=22;break}if(a="",d!==n.photoURL){e.next=8;break}console.log("\uc774\ubbf8\uc9c0 \uc548\ubc14\ub01c"),a=n.photoURL,e.next=16;break;case 8:if(""===d){e.next=16;break}return r=Object(C.d)(O,"".concat(n.uid,"/").concat(Object(P.a)())),e.next=12,Object(C.e)(r,d,"data_url");case 12:return c=e.sent,e.next=15,Object(C.b)(c.ref);case 15:a=e.sent;case 16:if(!(i.length>2&&i.length<21)){e.next=21;break}return e.next=19,Object(I.i)(y.currentUser,{displayName:i,photoURL:a}).then((function(){t(),alert("\ud504\ub85c\ud544\uc774 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")})).catch((function(e){console.log(e)}));case 19:e.next=22;break;case 21:alert("\uae00\uc790\uc218\uac00 \ub108\ubb34 \uc801\uac70\ub098 \ub9ce\uc2b5\ub2c8\ub2e4! (3\uae00\uc790 \uc774\uc0c1 20\uc790 \uc774\ud558)");case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=Object(a.useRef)();return Object(w.jsxs)("div",{className:"container",children:[Object(w.jsxs)("form",{onSubmit:p,className:"profileForm",children:[Object(w.jsxs)("div",{children:[Object(w.jsxs)("p",{children:[n.displayName,"\ub2d8\uc758 \ud504\ub85c\ud544 Edit your Profile"]}),d&&Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("img",{className:"profileForm__Photo",src:d,width:"150px",height:"150px",alt:"".concat(n.displayName," \uc758 \ud504\ub85c\ud544\uc774\ubbf8\uc9c0")})}),Object(w.jsxs)("div",{children:[Object(w.jsx)("label",{htmlFor:"userPhoto",children:Object(w.jsx)("h4",{children:"\ud504\ub85c\ud544\uc0ac\uc9c4\ubc14\uafb8\uae30"})}),Object(w.jsx)("input",{id:"userPhoto",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;m(t)},n.readAsDataURL(t)},ref:h,style:{opacity:0}})]}),Object(w.jsx)("input",{onChange:function(e){var t=e.target.value;o(t)},type:"text",placeholder:"Edit Your Name",value:i,className:"formInput"})]}),Object(w.jsx)("input",{type:"submit",value:"Update Profile",className:"formBtn",style:{marginTop:10}})]}),Object(w.jsx)("button",{onClick:function(){Object(I.h)(y).then((function(){console.log("\ub85c\uadf8\uc544\uc6c3"),t(),window.location.replace("/")})).catch((function(e){console.error(e)}))},className:"formBtn logOut",children:"\ub85c\uadf8\uc544\uc6c3"})]})},A=function(e){var t=e.user;return Object(w.jsx)("nav",{children:Object(w.jsxs)("ul",{style:{display:"flex",justifyContent:"center",marginTop:50},children:[Object(w.jsx)("li",{children:Object(w.jsx)(o.b,{to:"/",style:{marginRight:30},children:Object(w.jsx)(v.a,{icon:k.b,color:"#04AAFF",size:"2x"})})}),Object(w.jsx)("li",{children:Object(w.jsx)(o.b,{to:"/profile",children:Object(w.jsx)("img",{src:t.photoURL,alt:"userprofilePhoto",className:"navProfile"})})})]})})};var R=function(e){var t=e.refreshUser,n=e.user;return Object(w.jsxs)(o.a,{children:[n&&Object(w.jsx)(A,{user:n}),Object(w.jsx)(l.c,{children:Object(w.jsx)(w.Fragment,{children:n?Object(w.jsxs)("div",{style:{maxWidth:890,width:"100%",margin:"0 auto",marginTop:40,display:"flex",justifyContent:"center"},children:[Object(w.jsx)(l.a,{exact:!0,path:"/",children:Object(w.jsx)(_,{refreshUser:t,user:n})}),Object(w.jsx)(l.a,{exact:!0,path:"/profile",children:Object(w.jsx)(T,{refreshUser:t,user:n})})]}):Object(w.jsx)(l.a,{exact:!0,path:"/",children:Object(w.jsx)(N,{})})})})]})},F=["title","titleId"];function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function L(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function M(e,t){var n=e.title,r=e.titleId,c=L(e,F);return a.createElement("svg",B({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:{margin:"auto",background:"none",display:"block",shapeRendering:"auto",animationPlayState:"running",animationDelay:"0s"},width:"193px",height:"193px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,a.createElement("g",{style:{animationPlayState:"running",animationDelay:"0s"}},a.createElement("circle",{cx:60,cy:50,r:4,fill:"#62ff4c",style:{animationPlayState:"running",animationDelay:"0s"}},a.createElement("animate",{attributeName:"cx",repeatCount:"indefinite",dur:"0.7299270072992701s",values:"95;35",keyTimes:"0;1",begin:"-0.9179000000000002s",style:{animationPlayState:"running",animationDelay:"0s"}}),a.createElement("animate",{attributeName:"fill-opacity",repeatCount:"indefinite",dur:"0.7299270072992701s",values:"0;1;1",keyTimes:"0;0.2;1",begin:"-0.9179000000000002s",style:{animationPlayState:"running",animationDelay:"0s"}})),a.createElement("circle",{cx:60,cy:50,r:4,fill:"#62ff4c",style:{animationPlayState:"running",animationDelay:"0s"}},a.createElement("animate",{attributeName:"cx",repeatCount:"indefinite",dur:"0.7299270072992701s",values:"95;35",keyTimes:"0;1",begin:"-0.45210000000000006s",style:{animationPlayState:"running",animationDelay:"0s"}}),a.createElement("animate",{attributeName:"fill-opacity",repeatCount:"indefinite",dur:"0.7299270072992701s",values:"0;1;1",keyTimes:"0;0.2;1",begin:"-0.45210000000000006s",style:{animationPlayState:"running",animationDelay:"0s"}})),a.createElement("circle",{cx:60,cy:50,r:4,fill:"#62ff4c",style:{animationPlayState:"running",animationDelay:"0s"}},a.createElement("animate",{attributeName:"cx",repeatCount:"indefinite",dur:"0.7299270072992701s",values:"95;35",keyTimes:"0;1",begin:"0s",style:{animationPlayState:"running",animationDelay:"0s"}}),a.createElement("animate",{attributeName:"fill-opacity",repeatCount:"indefinite",dur:"0.7299270072992701s",values:"0;1;1",keyTimes:"0;0.2;1",begin:"0s",style:{animationPlayState:"running",animationDelay:"0s"}}))),a.createElement("g",{transform:"translate(-15 0)",style:{animationPlayState:"running",animationDelay:"0s"}},a.createElement("path",{d:"M50 50L20 50A30 30 0 0 0 80 50Z",fill:"#5eb8ff",transform:"rotate(90 50 50)",style:{animationPlayState:"running",animationDelay:"0s"}}),a.createElement("path",{d:"M50 50L20 50A30 30 0 0 0 80 50Z",fill:"#5eb8ff",style:{animationPlayState:"running",animationDelay:"0s"}},a.createElement("animateTransform",{attributeName:"transform",type:"rotate",repeatCount:"indefinite",dur:"0.7299270072992701s",values:"0 50 50;45 50 50;0 50 50",keyTimes:"0;0.5;1",style:{animationPlayState:"running",animationDelay:"0s"}})),a.createElement("path",{d:"M50 50L20 50A30 30 0 0 1 80 50Z",fill:"#5eb8ff",style:{animationPlayState:"running",animationDelay:"0s"}},a.createElement("animateTransform",{attributeName:"transform",type:"rotate",repeatCount:"indefinite",dur:"0.7299270072992701s",values:"0 50 50;-45 50 50;0 50 50",keyTimes:"0;0.5;1",style:{animationPlayState:"running",animationDelay:"0s"}}))))}var z=a.forwardRef(M);n.p;var Z=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(y.currentUser),i=Object(s.a)(c,2),o=i[0],l=i[1];return Object(a.useEffect)((function(){Object(m.e)(y,(function(e){e&&l({displayName:e.displayName,photoURL:e.photoURL,uid:e.uid,updateProfile:function(e){return Object(m.h)(y,e)}}),r(!0)}))}),[]),Object(w.jsx)(w.Fragment,{children:n?Object(w.jsx)(R,{refreshUser:function(){if(y.currentUser){var e=y.currentUser;l({displayName:e.displayName,photoURL:e.photoURL,uid:e.uid,updateProfile:function(e){return Object(m.h)(y,e)}})}else l(null)},user:o}):Object(w.jsx)("div",{className:"align-center",children:Object(w.jsx)(z,{width:"150",height:"150"})})})};n(71);i.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(Z,{})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.8123cb84.chunk.js.map